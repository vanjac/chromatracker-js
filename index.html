<!DOCTYPE html>

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">

<link href="index.css" rel="stylesheet">

<script src="src/Module.js"></script>
<script src="src/PeriodTable.js"></script>
<script src="src/ModLoader.js"></script>
<script src="src/ModWriter.js"></script>
<script src="src/Playback.js"></script>
<script src="src/PatternView.js"></script>
<script src="src/PatternEdit.js"></script>

<body>
<form class="vflex" id="playbackControls">
  <div class="hflex">
    <label class="label-button">
      <input type="file" id="fileSelect" autocomplete="off">
      <span><img class="icon" src="assets/folder-open.svg"></span>
    </label>
    <button type="button" id="fileDownload">
      <img class="icon" src="assets/web.svg">
    </button>
    <button type="button" id="fileSave">
      <img class="icon" src="assets/download.svg">
    </button>
    <button type="button" onclick="patternZap()">
      <img class="icon" src="assets/playlist-remove.svg">
    </button>
    <output id="title"></output>
  </div>
  <div class="hflex">
    <button id="playStart" type="button">
      <img class="icon" src="assets/step-forward.svg">
    </button>
    <button id="playPattern" type="button">
      <img class="icon" src="assets/playlist-play.svg">
    </button>
    <button id="playRow" type="button">
      <img class="icon" src="assets/play.svg">
    </button>
    <button id="pause" class="hide" type="button">
      <img class="icon" src="assets/pause.svg">
    </button>
    <label class="label-button">
      <input type="checkbox" id="patternLoop">
      <span><img class="icon" src="assets/repeat-variant.svg"></span>
    </label>
    <label class="label-button">
      <input type="checkbox" checked id="follow">
      <span><img class="icon" src="assets/format-indent-increase.svg"></span>
    </label>
  </div>
  <div class="hflex">
    <select class="hselect" id="sequence" size="2" oninput="refreshPattern()"></select>
  </div>
  <div class="hflex">
    <label>
      Tempo:
      <input style="width:36pt;" type="number" value="125" id="tempo">
    </label>
    <label>
      Speed:
      <input style="width:36pt;" type="number" value="6" id="speed">
    </label>
  </div>
  <div id="mute">
    <input type="checkbox" onchange="muteCheck(0, this.checked)" checked>
    <input type="checkbox" onchange="muteCheck(1, this.checked)" checked>
    <input type="checkbox" onchange="muteCheck(2, this.checked)" checked>
    <input type="checkbox" onchange="muteCheck(3, this.checked)" checked>
  </div>
</form>
<div class="scrollable" style="flex:1 0 0" id="patternScroll">
  <div style="height:50%"></div>
  <table id="patternTable"></table>
  <div style="height:50%"></div>
</div>
<div class="vflex">
  <div id="errors"></div>
  <div class="hflex">
    <button id="lift">
      <img class="icon" src="assets/eyedropper.svg">
    </button>
    <span id="entryCell" class="pattern-cell">
      <span id="entryPitch" class="cell-pitch"></span>
      <span id="entryInst" class="cell-inst"></span>
      <span id="entryEffect" class="cell-effect"></span>
    </span>
    <button id="write">
      <img class="icon" src="assets/pencil.svg">
    </button>
    <button id="clear">
      <img class="icon" src="assets/eraser.svg">
    </button>
    <button onclick="undo()">
      <img class="icon" src="assets/undo.svg">
    </button>
  </div>
  <form id="pitchEntry" class="hflex">
    <label class="label-button">
      <input type="checkbox" checked id="pitchEnable" onchange="updateEntryParts()">
      <span>Pitch</span>
    </label>
    <input style="flex:1" type="range" min="0" max="59" value="36" id="jamPitch">
  </form>
  <form id="sampleEntry" class="hflex">
    <label class="label-button">
      <input type="checkbox" checked id="sampleEnable" onchange="updateEntryParts()">
      <span>Sample</span>
    </label>
    <span id="sampleList" class="hflex" style="flex-wrap:wrap"></span>
  </form>
  <form id="effectEntry" class="hflex">
    <label class="label-button">
      <input type="checkbox" id="effectEnable" onchange="updateEntryParts()">
      <span>Effect</span>
    </label>
    <select id="effect">
      <option>0: Arpeggio</option>
      <option>1: Port Up</option>
      <option>2: Port Down</option>
      <option>3: Tone Port</option>
      <option>4: Vibrato</option>
      <option>5: Volslide+Port</option>
      <option>6: Volslide+Vib</option>
      <option>7: Tremolo</option>
      <option>8: Panning</option>
      <option>9: Offset</option>
      <option>A: Volume Slide</option>
      <option>B: Position Jump</option>
      <option selected>C: Volume</option>
      <option>D: Pattern Break</option>
      <option>E: Extended</option>
      <option>F: Tempo</option>
    </select>
    <select id="param0">
      <option>0</option>
      <option>1</option>
      <option>2</option>
      <option>3</option>
      <option>4</option>
      <option>5</option>
      <option>6</option>
      <option>7</option>
      <option>8</option>
      <option>9</option>
      <option>A</option>
      <option>B</option>
      <option>C</option>
      <option>D</option>
      <option>E</option>
      <option>F</option>
    </select>
    <select id="param1">
      <option>0</option>
      <option>1</option>
      <option>2</option>
      <option>3</option>
      <option>4</option>
      <option>5</option>
      <option>6</option>
      <option>7</option>
      <option>8</option>
      <option>9</option>
      <option>A</option>
      <option>B</option>
      <option>C</option>
      <option>D</option>
      <option>E</option>
      <option>F</option>
    </select>
  </form>
</div>

<!-- Templates -->

<template id="radioButtonTemplate">
  <label class="label-button">
    <input type="radio">
    <span></span>
  </label>
</template>
<template id="cellTemplate">
  <td class="pattern-cell">
    <span id="pitch" class="cell-pitch"></span>
    <span id="inst" class="cell-inst"></span>
    <span id="effect" class="cell-effect"></span>
  </td>
</template>

<script src="index.js"></script>
</body>