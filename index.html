<!DOCTYPE html>

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<link href="index.css" rel="stylesheet">

<script src="src/Module.js"></script>
<script src="src/PeriodTable.js"></script>
<script src="src/ModLoader.js"></script>
<script src="src/ModWriter.js"></script>
<script src="src/Playback.js"></script>
<script src="src/PatternView.js"></script>
<script src="src/PatternEdit.js"></script>

<body>
<div class="vflex">
  <div class="hflex">
    <input id="file-select" type="file">
    <button onclick="loadFile()">Load</button>
    <button onclick="saveFile()">Save</button>
  </div>
  <div class="hflex">
    <button onclick="play()">Play</button>
    <button onclick="play(true)">Play from</button>
    <button onclick="pause()">Stop</button>
    <button onclick="patternZap()">Pattern Zap</button>
  </div>
  <div class="hflex">
    Title: <span id="title"></span>
  </div>
  <div class="hflex">
    <select id="sequence" size="10" style="width:30pt" oninput="refreshPattern()"></select>
    <select id="samples" size="10" style="width:130pt"></select>
  </div>
  <div class="hflex">
    <input type="checkbox" checked id="follow">
    <label for="follow">Follow playback</label>
  </div>
  <div class="hflex">
    Tempo: <input style="width:36pt;" type="number" id="tempo">
    Speed: <input style="width:36pt;" type="number" id="speed">
  </div>
  <div>
    <input type="checkbox" onchange="muteCheck(0, this.checked)" checked>
    <input type="checkbox" onchange="muteCheck(1, this.checked)" checked>
    <input type="checkbox" onchange="muteCheck(2, this.checked)" checked>
    <input type="checkbox" onchange="muteCheck(3, this.checked)" checked>
  </div>
</div>
<div style="flex-grow:1; overflow-x:auto; overflow-y:auto;" id="pattern-scroll">
  <div style="height:50%"></div>
  <table id="pattern-table" style="font-family:monospace;"></table>
  <div style="height:50%"></div>
</div>
<div class="vflex">
  <div id="errors">
    Errors:<br>
  </div>
  <div class="hflex">
    <input type="checkbox" checked id="pitch-enable">
    <label for="pitch-enable">Pitch</label>
    <input style="flex-grow:1" type="range" min="0" max="59" id="jam-pitch-range"
      oninput="query('#jam-pitch').value=this.value;jamUp();jamDown()"
      onmousedown="jamDown()" onmouseup="jamUp()" ontouchstart="jamDown()" ontouchend="jamUp()">
    <input style="width:36pt;" type="number" value="36" id="jam-pitch" oninput="query('#jam-pitch-range').value=this.value">
  </div>
  <div class="hflex">
    <input type="checkbox" checked id="sample-enable">
    <label for="sample-enable">Sample</label>
    <select id="effect">
      <option>0: Arpeggio</option>
      <option>1: Port Up</option>
      <option>2: Port Down</option>
      <option>3: Tone Port</option>
      <option>4: Vibrato</option>
      <option>5: Volslide+Port</option>
      <option>6: Volslide+Vib</option>
      <option>7: Tremolo</option>
      <option>8: Panning</option>
      <option>9: Offset</option>
      <option>A: Volume Slide</option>
      <option>B: Position Jump</option>
      <option>C: Volume</option>
      <option>D: Pattern Break</option>
      <option>E: Extended</option>
      <option>F: Tempo</option>
    </select>
    <select id="param0">
      <option>0</option>
      <option>1</option>
      <option>2</option>
      <option>3</option>
      <option>4</option>
      <option>5</option>
      <option>6</option>
      <option>7</option>
      <option>8</option>
      <option>9</option>
      <option>A</option>
      <option>B</option>
      <option>C</option>
      <option>D</option>
      <option>E</option>
      <option>F</option>
    </select>
    <select id="param1">
      <option>0</option>
      <option>1</option>
      <option>2</option>
      <option>3</option>
      <option>4</option>
      <option>5</option>
      <option>6</option>
      <option>7</option>
      <option>8</option>
      <option>9</option>
      <option>A</option>
      <option>B</option>
      <option>C</option>
      <option>D</option>
      <option>E</option>
      <option>F</option>
    </select>
    <button onclick="resetEffect()">Reset</button>
  </div>
  <div class="hflex">
    <button style="flex-grow:1" onmousedown="jamDown(event)" onmouseup="jamUp(event)"
      ontouchstart="jamDown(event)" ontouchend="jamUp(event)">Jam</button>
    <button style="flex-grow:1" onmousedown="jamDown(event); writeCell()" onmouseup="jamUp(event)"
      ontouchstart="jamDown(event); writeCell()" ontouchend="jamUp(event)">Write</button>
    <button style="flex-grow:1" onclick="clearCell()">Clear</button>
    <button style="flex-grow:1" onmousedown="liftCell(); jamDown(event)" onmouseup="jamUp(event)"
      ontouchstart="liftCell(); jamDown(event)" ontouchend="jamUp(event)">Lift</button>
  </div>
</div>

<script src="index.js"></script>
</body>